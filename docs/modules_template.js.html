<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>modules/template.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="-_anonymous_-jsPDF-API.GState.html">GState</a></li><li><a href="jsPDF.html">jsPDF</a><ul class='methods'><li data-type='method'><a href="jsPDF.html#addFont">addFont</a></li><li data-type='method'><a href="jsPDF.html#addGState">addGState</a></li><li data-type='method'><a href="jsPDF.html#addPage">addPage</a></li><li data-type='method'><a href="jsPDF.html#beginFormObject">beginFormObject</a></li><li data-type='method'><a href="jsPDF.html#circle">circle</a></li><li data-type='method'><a href="jsPDF.html#clip">clip</a></li><li data-type='method'><a href="jsPDF.html#clipEvenOdd">clipEvenOdd</a></li><li data-type='method'><a href="jsPDF.html#deletePage">deletePage</a></li><li data-type='method'><a href="jsPDF.html#doFormObject">doFormObject</a></li><li data-type='method'><a href="jsPDF.html#ellipse">ellipse</a></li><li data-type='method'><a href="jsPDF.html#endFormObject">endFormObject</a></li><li data-type='method'><a href="jsPDF.html#getCharSpace">getCharSpace</a></li><li data-type='method'><a href="jsPDF.html#getCreationDate">getCreationDate</a></li><li data-type='method'><a href="jsPDF.html#getDrawColor">getDrawColor</a></li><li data-type='method'><a href="jsPDF.html#getFileId">getFileId</a></li><li data-type='method'><a href="jsPDF.html#getFillColor">getFillColor</a></li><li data-type='method'><a href="jsPDF.html#getFont">getFont</a></li><li data-type='method'><a href="jsPDF.html#getFontList">getFontList</a></li><li data-type='method'><a href="jsPDF.html#getFontSize">getFontSize</a></li><li data-type='method'><a href="jsPDF.html#getFormObject">getFormObject</a></li><li data-type='method'><a href="jsPDF.html#getLineHeightFactor">getLineHeightFactor</a></li><li data-type='method'><a href="jsPDF.html#getR2L">getR2L</a></li><li data-type='method'><a href="jsPDF.html#getTextColor">getTextColor</a></li><li data-type='method'><a href="jsPDF.html#insertPage">insertPage</a></li><li data-type='method'><a href="jsPDF.html#line">line</a></li><li data-type='method'><a href="jsPDF.html#lines">lines</a></li><li data-type='method'><a href="jsPDF.html#lstext">lstext</a></li><li data-type='method'><a href="jsPDF.html#movePage">movePage</a></li><li data-type='method'><a href="jsPDF.html#output">output</a></li><li data-type='method'><a href="jsPDF.html#path">path</a></li><li data-type='method'><a href="jsPDF.html#rect">rect</a></li><li data-type='method'><a href="jsPDF.html#restoreGraphicsState">restoreGraphicsState</a></li><li data-type='method'><a href="jsPDF.html#roundedRect">roundedRect</a></li><li data-type='method'><a href="jsPDF.html#save">save</a></li><li data-type='method'><a href="jsPDF.html#saveGraphicsState">saveGraphicsState</a></li><li data-type='method'><a href="jsPDF.html#setCharSpace">setCharSpace</a></li><li data-type='method'><a href="jsPDF.html#setCreationDate">setCreationDate</a></li><li data-type='method'><a href="jsPDF.html#setCurrentTransformationMatrix">setCurrentTransformationMatrix</a></li><li data-type='method'><a href="jsPDF.html#setDisplayMode">setDisplayMode</a></li><li data-type='method'><a href="jsPDF.html#setDocumentProperties">setDocumentProperties</a></li><li data-type='method'><a href="jsPDF.html#setDrawColor">setDrawColor</a></li><li data-type='method'><a href="jsPDF.html#setFileId">setFileId</a></li><li data-type='method'><a href="jsPDF.html#setFillColor">setFillColor</a></li><li data-type='method'><a href="jsPDF.html#setFont">setFont</a></li><li data-type='method'><a href="jsPDF.html#setFontSize">setFontSize</a></li><li data-type='method'><a href="jsPDF.html#setFontStyle">setFontStyle</a></li><li data-type='method'><a href="jsPDF.html#setGState">setGState</a></li><li data-type='method'><a href="jsPDF.html#setLineCap">setLineCap</a></li><li data-type='method'><a href="jsPDF.html#setLineDashPattern">setLineDashPattern</a></li><li data-type='method'><a href="jsPDF.html#setLineHeightFactor">setLineHeightFactor</a></li><li data-type='method'><a href="jsPDF.html#setLineJoin">setLineJoin</a></li><li data-type='method'><a href="jsPDF.html#setLineMiterLimit">setLineMiterLimit</a></li><li data-type='method'><a href="jsPDF.html#setLineWidth">setLineWidth</a></li><li data-type='method'><a href="jsPDF.html#setPage">setPage</a></li><li data-type='method'><a href="jsPDF.html#setR2L">setR2L</a></li><li data-type='method'><a href="jsPDF.html#setTextColor">setTextColor</a></li><li data-type='method'><a href="jsPDF.html#text">text</a></li><li data-type='method'><a href="jsPDF.html#triangle">triangle</a></li></ul></li><li><a href="Matrix.html">Matrix</a><ul class='methods'><li data-type='method'><a href="Matrix.html#applyToPoint">applyToPoint</a></li><li data-type='method'><a href="Matrix.html#applyToRectangle">applyToRectangle</a></li><li data-type='method'><a href="Matrix.html#clone">clone</a></li><li data-type='method'><a href="Matrix.html#decompose">decompose</a></li><li data-type='method'><a href="Matrix.html#inversed">inversed</a></li><li data-type='method'><a href="Matrix.html#join">join</a></li><li data-type='method'><a href="Matrix.html#multiply">multiply</a></li><li data-type='method'><a href="Matrix.html#toString">toString</a></li></ul></li><li><a href="module-AcroForm-AcroFormButton.html">AcroFormButton</a></li><li><a href="module-AcroForm-AcroFormCheckBox.html">AcroFormCheckBox</a></li><li><a href="module-AcroForm-AcroFormChoiceField.html">AcroFormChoiceField</a></li><li><a href="module-AcroForm-AcroFormComboBox.html">AcroFormComboBox</a><ul class='methods'><li data-type='method'><a href="module-AcroForm-AcroFormComboBox.html#addOption">addOption</a></li><li data-type='method'><a href="module-AcroForm-AcroFormComboBox.html#getOptions">getOptions</a></li><li data-type='method'><a href="module-AcroForm-AcroFormComboBox.html#removeOption">removeOption</a></li><li data-type='method'><a href="module-AcroForm-AcroFormComboBox.html#setOptions">setOptions</a></li></ul></li><li><a href="module-AcroForm-AcroFormEditBox.html">AcroFormEditBox</a><ul class='methods'><li data-type='method'><a href="module-AcroForm-AcroFormEditBox.html#addOption">addOption</a></li><li data-type='method'><a href="module-AcroForm-AcroFormEditBox.html#getOptions">getOptions</a></li><li data-type='method'><a href="module-AcroForm-AcroFormEditBox.html#removeOption">removeOption</a></li><li data-type='method'><a href="module-AcroForm-AcroFormEditBox.html#setOptions">setOptions</a></li></ul></li><li><a href="module-AcroForm-AcroFormField.html">AcroFormField</a></li><li><a href="module-AcroForm-AcroFormListBox.html">AcroFormListBox</a><ul class='methods'><li data-type='method'><a href="module-AcroForm-AcroFormListBox.html#addOption">addOption</a></li><li data-type='method'><a href="module-AcroForm-AcroFormListBox.html#getOptions">getOptions</a></li><li data-type='method'><a href="module-AcroForm-AcroFormListBox.html#removeOption">removeOption</a></li><li data-type='method'><a href="module-AcroForm-AcroFormListBox.html#setOptions">setOptions</a></li></ul></li><li><a href="module-AcroForm-AcroFormPasswordField.html">AcroFormPasswordField</a></li><li><a href="module-AcroForm-AcroFormPDFObject.html">AcroFormPDFObject</a></li><li><a href="module-AcroForm-AcroFormPushButton.html">AcroFormPushButton</a></li><li><a href="module-AcroForm-AcroFormRadioButton.html">AcroFormRadioButton</a></li><li><a href="module-AcroForm-AcroFormTextField.html">AcroFormTextField</a></li><li><a href="module-canvas-Canvas.html">Canvas</a></li></ul><h3>Modules</h3><ul><li><a href="module-AcroForm.html">AcroForm</a><ul class='methods'><li data-type='method'><a href="module-AcroForm.html#addButton">addButton</a></li><li data-type='method'><a href="module-AcroForm.html#addChoiceField">addChoiceField</a></li><li data-type='method'><a href="module-AcroForm.html#addField">addField</a></li><li data-type='method'><a href="module-AcroForm.html#addTextField">addTextField</a></li></ul></li><li><a href="module-addImage.html">addImage</a><ul class='methods'><li data-type='method'><a href="module-addImage.html#~addImage">addImage</a></li><li data-type='method'><a href="module-addImage.html#~arrayBufferToBinaryString">arrayBufferToBinaryString</a></li><li data-type='method'><a href="module-addImage.html#~binaryStringToUint8Array">binaryStringToUint8Array</a></li><li data-type='method'><a href="module-addImage.html#~convertBase64ToBinaryString">convertBase64ToBinaryString</a></li><li data-type='method'><a href="module-addImage.html#~extractImageFromDataUrl">extractImageFromDataUrl</a></li><li data-type='method'><a href="module-addImage.html#~getImageFileTypeByImageData">getImageFileTypeByImageData</a></li><li data-type='method'><a href="module-addImage.html#~getImageProperties">getImageProperties</a></li><li data-type='method'><a href="module-addImage.html#~isArrayBuffer">isArrayBuffer</a></li><li data-type='method'><a href="module-addImage.html#~isArrayBufferView">isArrayBufferView</a></li><li data-type='method'><a href="module-addImage.html#~sHashCode">sHashCode</a></li><li data-type='method'><a href="module-addImage.html#~supportsArrayBuffer">supportsArrayBuffer</a></li><li data-type='method'><a href="module-addImage.html#~validateStringAsBase64">validateStringAsBase64</a></li></ul></li><li><a href="module-annotations.html">annotations</a><ul class='methods'><li data-type='method'><a href="module-annotations.html#~createAnnotation">createAnnotation</a></li><li data-type='method'><a href="module-annotations.html#~getTextWidth">getTextWidth</a></li><li data-type='method'><a href="module-annotations.html#~link">link</a></li><li data-type='method'><a href="module-annotations.html#~textWithLink">textWithLink</a></li></ul></li><li><a href="module-arabic.html">arabic</a><ul class='methods'><li data-type='method'><a href="module-arabic.html#~processArabic">processArabic</a></li></ul></li><li><a href="module-autoprint.html">autoprint</a><ul class='methods'><li data-type='method'><a href="module-autoprint.html#~autoPrint">autoPrint</a></li></ul></li><li><a href="module-bmp_support.html">bmp_support</a></li><li><a href="module-canvas.html">canvas</a><ul class='methods'><li data-type='method'><a href="module-canvas.html#~getContext">getContext</a></li><li data-type='method'><a href="module-canvas.html#~toDataURL">toDataURL</a></li></ul></li><li><a href="module-cell.html">cell</a><ul class='methods'><li data-type='method'><a href="module-cell.html#~cell">cell</a></li><li data-type='method'><a href="module-cell.html#~cellAddPage">cellAddPage</a></li><li data-type='method'><a href="module-cell.html#~cellInitialize">cellInitialize</a></li><li data-type='method'><a href="module-cell.html#~getTextDimensions">getTextDimensions</a></li><li data-type='method'><a href="module-cell.html#~printHeaderRow">printHeaderRow</a></li><li data-type='method'><a href="module-cell.html#~setHeaderFunction">setHeaderFunction</a></li><li data-type='method'><a href="module-cell.html#~setTableHeaderRow">setTableHeaderRow</a></li><li data-type='method'><a href="module-cell.html#~table">table</a></li></ul></li><li><a href="module-context2d.html">context2d</a><ul class='methods'><li data-type='method'><a href="module-context2d.html#~arc">arc</a></li><li data-type='method'><a href="module-context2d.html#~arcTo">arcTo</a></li><li data-type='method'><a href="module-context2d.html#~beginPath">beginPath</a></li><li data-type='method'><a href="module-context2d.html#~bezierCurveTo">bezierCurveTo</a></li><li data-type='method'><a href="module-context2d.html#~clearRect">clearRect</a></li><li data-type='method'><a href="module-context2d.html#~clip">clip</a></li><li data-type='method'><a href="module-context2d.html#~closePath">closePath</a></li><li data-type='method'><a href="module-context2d.html#~createArc">createArc</a></li><li data-type='method'><a href="module-context2d.html#~fillRect">fillRect</a></li><li data-type='method'><a href="module-context2d.html#~fillText">fillText</a></li><li data-type='method'><a href="module-context2d.html#~lineTo">lineTo</a></li><li data-type='method'><a href="module-context2d.html#~measureText">measureText</a></li><li data-type='method'><a href="module-context2d.html#~moveTo">moveTo</a></li><li data-type='method'><a href="module-context2d.html#~quadraticCurveTo">quadraticCurveTo</a></li><li data-type='method'><a href="module-context2d.html#~rect">rect</a></li><li data-type='method'><a href="module-context2d.html#~restore">restore</a></li><li data-type='method'><a href="module-context2d.html#~rotate">rotate</a></li><li data-type='method'><a href="module-context2d.html#~save">save</a></li><li data-type='method'><a href="module-context2d.html#~scale">scale</a></li><li data-type='method'><a href="module-context2d.html#~setTransform">setTransform</a></li><li data-type='method'><a href="module-context2d.html#~stroke">stroke</a></li><li data-type='method'><a href="module-context2d.html#~strokeRect">strokeRect</a></li><li data-type='method'><a href="module-context2d.html#~strokeText">strokeText</a></li><li data-type='method'><a href="module-context2d.html#~toDataURL">toDataURL</a></li><li data-type='method'><a href="module-context2d.html#~transform">transform</a></li><li data-type='method'><a href="module-context2d.html#~translate">translate</a></li></ul></li><li><a href="module-fileloading.html">fileloading</a><ul class='methods'><li data-type='method'><a href="module-fileloading.html#~loadFile">loadFile</a></li><li data-type='method'><a href="module-fileloading.html#~loadImageFile">loadImageFile</a></li></ul></li><li><a href="module-gif_support.html">gif_support</a></li><li><a href="module-html.html">html</a><ul class='methods'><li data-type='method'><a href="module-html.html#~html">html</a></li></ul></li><li><a href="module-javascript.html">javascript</a><ul class='methods'><li data-type='method'><a href="module-javascript.html#~addJS">addJS</a></li></ul></li><li><a href="module-jpeg_support.html">jpeg_support</a></li><li><a href="module-outline.html">outline</a></li><li><a href="module-png_support.html">png_support</a></li><li><a href="module-setLanguage.html">setLanguage</a><ul class='methods'><li data-type='method'><a href="module-setLanguage.html#~setLanguage">setLanguage</a></li></ul></li><li><a href="module-split_text_to_size.html">split_text_to_size</a><ul class='methods'><li data-type='method'><a href="module-split_text_to_size.html#~getCharWidthsArray">getCharWidthsArray</a></li><li data-type='method'><a href="module-split_text_to_size.html#~getStringUnitWidth">getStringUnitWidth</a></li><li data-type='method'><a href="module-split_text_to_size.html#~splitTextToSize">splitTextToSize</a></li></ul></li><li><a href="module-standard_fonts_metrics.html">standard_fonts_metrics</a></li><li><a href="module-svg.html">svg</a><ul class='methods'><li data-type='method'><a href="module-svg.html#~addSvg">addSvg</a></li><li data-type='method'><a href="module-svg.html#~addSvgAsImage">addSvgAsImage</a></li></ul></li><li><a href="module-template.html">template</a><ul class='methods'><li data-type='method'><a href="module-template.html#~beginTemplate">beginTemplate</a></li><li data-type='method'><a href="module-template.html#~endTemplate">endTemplate</a></li><li data-type='method'><a href="module-template.html#~useTemplate">useTemplate</a></li></ul></li><li><a href="module-total_pages.html">total_pages</a><ul class='methods'><li data-type='method'><a href="module-total_pages.html#~putTotalPages">putTotalPages</a></li></ul></li><li><a href="module-ttfsupport.html">ttfsupport</a></li><li><a href="module-utf8.html">utf8</a></li><li><a href="module-vFS.html">vFS</a><ul class='methods'><li data-type='method'><a href="module-vFS.html#~addFileToVFS">addFileToVFS</a></li><li data-type='method'><a href="module-vFS.html#~existsFileInVFS">existsFileInVFS</a></li><li data-type='method'><a href="module-vFS.html#~getFileFromVFS">getFileFromVFS</a></li></ul></li><li><a href="module-viewerpreferences.html">viewerpreferences</a><ul class='methods'><li data-type='method'><a href="module-viewerpreferences.html#~viewerPreferences">viewerPreferences</a></li></ul></li><li><a href="module-webp_support.html">webp_support</a></li><li><a href="module-xmp_metadata.html">xmp_metadata</a><ul class='methods'><li data-type='method'><a href="module-xmp_metadata.html#~addMetadata">addMetadata</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#addHTML">addHTML</a></li><li><a href="global.html#BmpDecoder">BmpDecoder</a></li><li><a href="global.html#SetsoptionsforBidiconversion">Sets options for Bidi conversion</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">modules/template.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @license
 * Copyright (c) 2018 Robert Wolke     r.wolke-jspdf@aestima.de
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */

/**
 * @typedef {Object} TemplateSize
 * @property {number} width width of template
 * @property {number} height height of template
 */
/**
 * jsPDF Template PlugIn
 *
 * @name template
 * @module
 */
(function(jsPDFAPI) {
	'use strict';
	
	var templatePrefix = 'TPL';
	//! need to link resource dictionary in XObject
	var resourceDictionaryObjId;
	
	function _getTemplates() {
		var tList = this.internal.collections['template_list'];
		var tStack =  this.internal.collections['template_stack'];
		//first run, so initialise stuff
		if(!tList) {
			this.internal.collections['template_list'] = tList = {};
			this.internal.collections['template_stack'] = tStack = [];
			this.internal.events.subscribe(
				'putXobjectDict', 
				function() {
					for(var name in tList) 
						/* istanbul ignore else - this is a simple sanity check that _putTemplate was successful */
						if(tList[name].objId)
							this.internal.write(tList[name].id, tList[name].objId, '0 R');
				},
				true
			);
			this.internal.events.subscribe(
				'putResources', 
				function() {
					for(var name in tList) 
						_putTemplate.call(this, tList[name]);
				},
				true
			);
			//! this is a very ugly hack !!!
			this.internal.events.subscribe(
				'putPage',
				function(opts) {
					resourceDictionaryObjId = opts.objId - 1
				},
				true
			)
			this.internal.events.subscribe(
				'addPage', 
				function() {
					if(tStack.length)
						throw new Error('jsPDF.template: addPage is not supported before endTemplate has been called!');
				}
			);
			this.internal.events.subscribe(
				'buildDocument', 
				function() {
					if(tStack.length)
						throw new Error('jsPDF.template: endTemplate has to be called before document can be saved!');
				},
				true
			);
		}
		return {
			list: tList,
			stack: tStack
		};
	}
	function _putTemplate(t) {
		t.objId =  this.internal.newObject();
		
		var keyValues = [];
		keyValues.push({ key: 'Type', value: '/XObject' });
		keyValues.push({ key: 'Subtype', value: '/Form' });
		keyValues.push({ key: 'FormType', value: '1' });
		keyValues.push({ key: 'Resources', value: resourceDictionaryObjId + ' 0 R' });
		keyValues.push({ key: 'Matrix', value: '[1 0 0 1 0 0]' });
		keyValues.push({
			key: 'BBox',
			value: '[' + [
				this.internal.f2(t.bbox.bottomLeftX),
				this.internal.f2(t.bbox.bottomLeftY),
				this.internal.f2(t.bbox.topRightX),
				this.internal.f2(t.bbox.topRightY)
			].join(' ') + ']'
		});
		
		this.internal.putStream({
			data: t.data.join('\n'),
			additionalKeyValues: keyValues
		});
		this.internal.out('endobj');
	}
	
	/**
	 * Begin a template context
	 *
	 * @name beginTemplate
	 * @function
	 * @public
	 * @param {string} name Name of the template context
	 * @param {number} [width=paperSize.Width] - width of template (in units declared at inception of PDF document
	 * @param {number} [height=pageSize.Height] - height of template (in units declared at inception of PDF document
	 */
	jsPDFAPI.beginTemplate = function(name, width, height) {
		var t = _getTemplates.call(this, true);
		var id = Object.keys(t.list).length + 1;
		if(!name)
			name = 'tmpl_' + id;
		if(t.list.hasOwnProperty(name) || t.list[name])
			throw new Error('jsPDF.beginTemplate: name is already used!');
		
		width = parseFloat(width) || this.internal.pageSize.getWidth(),
		height =  parseFloat(height) || this.internal.pageSize.getHeight(),
		
		t.list[name] = {
			id: '/' + templatePrefix + id,
			data: [],
			width: width,
			height: height,
			bbox: {
				bottomLeftX: 0,
				bottomLeftY: 0,
				topRightX: this.internal.getHorizontalCoordinate(width),
				topRightY: this.internal.getHorizontalCoordinate(height)
			},
			previousMediaBox: {},
			complete: false
		};
		
		/*
			* all uses of getVerticalCoordinate() use the page height:
			* to get positioning in template (with different height) working, 
			* it must be changed to template height.
			* But the state is saved and later restored...
			*/
		var pi = this.internal.getCurrentPageInfo();
		Object.assign(t.list[name].previousMediaBox, pi.pageContext.mediaBox);
		Object.assign(pi.pageContext.mediaBox, t.list[name].bbox);
		
		t.stack.unshift(t.list[name]);
		/*
			* out() calls have to be captured and redirected, otherwise
			* all of the template contents would be directly put on the page
			*/
		this.internal.setCustomOutputDestination(t.stack[0].data);
		return name;
	};
	
	/**
	 * End a template context
	 *
	 * @name endTemplate
	 * @function
	 * @public
	 */
	jsPDFAPI.endTemplate = function() {
		var t = _getTemplates.call(this);
		if(!t.stack.length)
			throw new Error('jsPDF.endTemplate: call jsPDF.beginTemplate first!');
		
		var o = t.stack.shift();
		o.complete = true;
		
		// restore page (or previous template) bounding box
		var pi = this.internal.getCurrentPageInfo();
		Object.assign(pi.pageContext.mediaBox, o.previousMediaBox);
		
		// restore output destination
		if(t.stack.length)
			this.internal.setCustomOutputDestination(t.stack[0].data);
		else
			this.internal.setCustomOutputDestination(this.internal.pages[pi.pageNumber]);
	};
	
	/**
	 * Use a declared template
	 *
	 * @name useTemplate
	 * @function
	 * 
	 * @public
	 * @param {string} name Name of the template context
	 * @param {number} [x] Position of top left corner of template measured from top edge of page (in units declared at inception of PDF document)
	 * @param {number} [y] Position of top left corner of template measured from top edge of page (in units declared at inception of PDF document) against left edge of the page.
	 * @param {number} [scaleX=1] - scale x-axis by this factor
	 * @param {number} [scaleY=scaleX] - scale y-axis by this factor
	 * @param {Matrix|number} [transform=0] - rotation clockwise in degree around x/y or complete transformation matrix
	 * 
	 * @example &lt;caption>Simple Template&lt;/caption>
	 * doc.beginTemplate('rect');
	 *   doc.setDrawColor(0);
	 *   doc.setFillColor(255,0,0);
	 *   doc.rect(0, 0, 10, 10, 'FD');
	 * doc.endTemplate();
	 * 
	 * // draws rect at (10/10)
	 * doc.useTemplate('rect', 10, 10);
	 * // draws rect at (30/10) but scaled by 2x (on each axis)
	 * doc.useTemplate('rect', 10, 40, 2);
	 * // draws rect at (30/10) but scaled by 2x on x-axis and 3x on y-axis
	 * doc.useTemplate('rect', 10, 70, 2, 3);
	 */
	jsPDFAPI.useTemplate = function (name, x, y, scaleX, scaleY, transform) {
		var t = _getTemplates.call(this);

		if (!t.list.hasOwnProperty(name) || !t.list[name])
			throw new Error('jsPDF.useTemplate: template by the name of "' + name + '" not found!');
		if (!t.list[name].complete)
			throw new Error('jsPDF.useTemplate: you have to call endTemplate before you can use the template!');
		
		if (arguments[arguments.length - 1] instanceof this.Matrix) 
			transform = arguments[arguments.length - 1];
		else {
			if (parseFloat(transform)) {
				var angle = parseFloat(transform) * Math.PI / 180;
				var c = Math.cos(angle);
				var s = Math.sin(angle);
				transform = transform = new this.Matrix(c,-s, s, c, 0, 0);
			}
			else
				transform = this.unitMatrix.clone();
			
			scaleX = scaleX ? parseFloat(scaleX) : 1;
			scaleY = scaleY ? parseFloat(scaleY) : scaleX;
			transform = transform.multiply(new this.Matrix(scaleX, 0, 0, scaleY, 0, 0));
			
			transform.tx = this.internal.getHorizontalCoordinate(parseFloat(x) || 0);
			transform.ty = this.internal.getVerticalCoordinate(parseFloat(y) || 0);

			// now y represents top left corner -> correct to bottom left
			var h = this.internal.getHorizontalCoordinate(parseFloat(t.list[name].height));
			transform = transform.multiply(new this.Matrix(1, 0, 0, 1, 0, - h));
		}
		
		this.internal.write("q " + transform.toString() + ' cm ' + t.list[name].id + ' Do Q');
		
		return {
			width:  Math.sqrt(
				t.list[name].width  * transform.sx  * t.list[name].width  * transform.sx + 
				t.list[name].height * transform.shy * t.list[name].height * transform.shy
			),
			height: Math.sqrt(
				t.list[name].width  * transform.shx * t.list[name].width  * transform.shx +
				t.list[name].height * transform.sy  * t.list[name].height * transform.sy
			)
		};
	};

})(jsPDF.API);</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Apr 26 2019 20:57:49 GMT+0200 (DST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
